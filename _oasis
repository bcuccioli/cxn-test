OASISFormat: 0.4
Name:        cxn-test
Version:     0.1
Synopsis:    Test connections between hosts over various protocols.
Authors:     Bryan Cuccioli
License:     MIT
BuildTools:  ocamlbuild

Library "lib"
  Path:    src/lib
  Modules: Ast, Cmd, Print

Library "parser"
  Path: src/parser
  Modules: Parse
  BuildDepends: lib

Library "eval"
  Path: src/eval
  Modules: Eval
  BuildDepends: lib, unix

Executable "cxn-test"
  Path:         src
  MainIs:       Main.ml
  BuildDepends: parser, eval, ANSITerminal

Executable "test_parser"
  Build$:         flag(tests)
  Path:           src/test
  MainIs:         test_parser.ml
  CompiledObject: best
  Install:        false
  BuildDepends:   parser, ounit2

Test "test_parser"
  Run$:             flag(tests)
  TestTools:        test_parser
  Command:          $test_parser
  WorkingDirectory: src/test

Executable "test_bind"
  Build$:         flag(tests)
  Path:           src/test
  MainIs:         test_bind.ml
  CompiledObject: best
  Install:        false
  BuildDepends:   lib, ounit2

Test "test_bind"
  Run$:             flag(tests)
  TestTools:        test_bind
  Command:          $test_bind
  WorkingDirectory: src/test
